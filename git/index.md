# Git

## 初期化
```
$ git init
```

## ワークツリーとインデックスの状態を確認
```
$ git status
```

## 変更をインデックスに登録する(ステージ)
file指定してステージ
```
$ git add <file>
```

全部のファイルをステージ
```
$ git add .
```

## ステージされた変更のコミット
```
$ gif commit -m "コメント"
```

## リポジトリの変更履歴
```
$ git log
```
GUIで確認したいときは
```
$ gitk
```

## ブランチの作成
```
$ git branch <ブランチ名>
```

## ブランチ一覧の表示
```
$ git branch
```

## ブランチの切替
```
$ git chekout <ブランチ名>
```

## ブランチの統合
- masterから派生したトピックブランチ等でのみコミットが進んでいた場合で、masterへ変更を取り込むなら、
  masterをチェックアウトした後、
  ```
  $ git merge <ブランチ名>
  ```
  この場合はfirst-fowardマージとなる。(HEADの位置が進むだけ)
- masterとtopic等のブランチでそれぞれコミットが進んでしまった場合、masterへ変更を取り込むなら、
  masterをチェックアウトした後、
  ```
  $ git merge <ブランチ名>
  ```
  コンフリクトが起き、自動マージに失敗した場合、コンフリクトの起きたファイルの該当箇所以下のようになる
  ```
  <<<<<<< HEAD
  【現在のブランチの内容】
  =======
  【merge使用としたブランチの内容】
  >>>>>>> issue
  ```
  これを修正した後、改めて、ステージ＞コミットすることで、新規にコミット(マージコミット)が作成される
- masterとtopic等のブランチでそれぞれコミットが進んでしまった場合で、変更履歴を複雑にしたく無い、直線的にしたい場合は
  masterではなく、トピック等のブランチをチェックアウトした後、
  ```
  $ git rebase <masterブランチ>
  ```
  コンフリクトが起きたら、ファイルが先のと同様に差分が差込まれるので、修正する。
  修正したら、
  ```
  $ git rebase --continue
  ```
  これでmasterからfast-forwardマージ可能になる。masterをチェックアウトし、
  ```
  $ git merge <masterブランチ>
  ```

## ブランチの削除
```
$ git branch -d <ブランチ名>
```

## リモートリポジトリの追加
nameにはoriginを付けるのが慣例。pushやpullもリポジトリを省略するとoriginを使用する。
リモートのURLは対象のサービス上で確認する。
```
$ git remote add <name> <リモートのURL>
```

## プッシュ
```
$ git push <リモートのURL> <プッシュするローカルブランチ>...
```

## プル
現在のブランチにリモートのブランチを取り込む
```
$ git pull <リモートのURL> <プルするリモートブランチ>...
```

## フェッチ
リモートの最新履歴を取得する。名前のないブランチとして(FETCH_HEADとしてチェックアウトもできる)取得するだけで、これをマージすることもできる。フェッチ＋マージがプルとなる。
```
$ git fetch <リモートのURL> <フェッチするリモートブランチ>...
```

## クローン
```
$ git clone <リモートのURL> <複製先ディレクトリ>
```